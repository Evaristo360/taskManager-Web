<div class="container mt-5">
  <div class="row">
    <div class="col">  
      <h2 class="mb-4">Lista de Tareas</h2>
    </div>
    <div class="col text-center">
      <button class="btn btn-success" routerLink="/crear">
        <i class="fas fa-plus"></i> Agregar Nueva Tarea
      </button>
    </div> 
  </div>

  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Título</th>
        <th scope="col">Descripción</th>
        <th scope="col">Estado</th>
        <th scope="col">Fecha Creación</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let tarea of tareas">
        <td>{{ tarea.titulo }}</td>
        <td>{{ tarea.descripcion }}</td>
        <td>
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="estadoDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              {{ tarea.estado === 0 ? 'Pendiente' : tarea.estado === 1 ? 'En proceso' : 'Completa' }}
            </button>
            <ul class="dropdown-menu" aria-labelledby="estadoDropdown">
              <li><a class="dropdown-item" href="#" (click)="tarea.estado = 0; actualizarEstado(tarea)">Pendiente</a></li>
              <li><a class="dropdown-item" href="#" (click)="tarea.estado = 1; actualizarEstado(tarea)">En proceso</a></li>
              <li><a class="dropdown-item" href="#" (click)="tarea.estado = 2; actualizarEstado(tarea)">Completa</a></li>
            </ul>
          </div>
        </td>
        <td>{{ tarea.fechaCreacion }}</td>
        <td>
          <button class="btn btn-info me-2" routerLink="/detalle/{{ tarea.id }}">
            <i class="fas fa-eye"></i> Ver
          </button>
          <button class="btn btn-danger me-2" (click)="eliminarTarea(tarea.id)">
            <i class="fas fa-trash"></i> Eliminar
          </button>
          <button class="btn btn-primary" routerLink="/editar/{{ tarea.id }}">
            <i class="fas fa-pencil-alt"></i> Editar
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>